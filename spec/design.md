# 設計書

## 1. 概要

本ドキュメントは、要件定義書に基づいて、Next.jsとmicroCMSを用いたモダンなWebサイトの技術設計を定義する。

## 2. アーキテクチャ

-   **フロントエンド**: Next.js (App Router)
    -   **レンダリング戦略**:
        -   トップページ、メンバーページ、ニュース一覧・詳細ページ: SSG (Static Site Generation) を採用し、ビルド時に静的HTMLを生成する。ISR (Incremental Static Regeneration) を導入し、定期的にコンテンツの鮮度を保つ。
-   **ヘッドレスCMS**: microCMS
    -   コンテンツ（ニュース、メンバー）の管理・配信を行う。

## 3. ディレクトリ構造

プロジェクトの主要なディレクトリ構造は以下のように設計する。

```
.
├── /components/      # 再利用可能なUIコンポーネント
│   ├── Header.tsx      # ヘッダー
│   ├── Footer.tsx      # フッター
│   └── Layout.tsx      # 共通レイアウト
├── /libs/            # 外部サービスとの連携など（microCMSクライアント、型定義）
│   ├── client.ts
│   └── types/
│       ├── news.ts     # ニュースの型定義
│       └── member.ts   # メンバーの型定義
├── /app/             # Next.js App Routerのルート
│   ├── layout.tsx      # ルートレイアウト
│   ├── page.tsx        # トップページ
│   ├── members/
│   │   └── page.tsx    # メンバー一覧ページ
│   └── news/
│       ├── page.tsx    # ニュース一覧ページ
│       └── [id]/
│           └── page.tsx  # ニュース詳細ページ
├── /styles/          # スタイルシート
│   └── globals.css     # グローバルスタイル
└── /public/          # 静的ファイル
```

## 4. microCMS API設計

microCMSで管理するAPIのスキーマを以下のように定義する。

### 4.1. ニュース (APIエンドポイント: `news`)

| フィールドID | 型             | 説明                   |
| :----------- | :------------- | :--------------------- |
| `title`      | テキストフィールド | ニュースのタイトル     |
| `body`       | リッチエディタ   | ニュースの本文         |
| `eyecatch`   | 画像           | アイキャッチ画像       |

### 4.2. メンバー (APIエンドポイント: `members`)

| フィールドID | 型             | 説明                   |
| :----------- | :------------- | :--------------------- |
| `name`       | テキストフィールド | メンバーの名前         |
| `position`   | テキストフィールド | メンバーの役職         |
| `profile`    | リッチエディタ   | メンバーのプロフィール |
| `image`      | 画像           | メンバーの画像         |

## 5. ページとデータ取得の詳細

### 5.1. トップページ (`/app/page.tsx`)

-   **データ取得**: `microCMS` の `news` APIからお知らせの最新数件を取得して表示する。
-   **表示内容**: お知らせ一覧へのリンク、お知らせ数件のリスト。

### 5.2. メンバーページ (`/app/members/page.tsx`)

-   **データ取得**: `microCMS` の `members` APIから全てのメンバーを取得して表示する。
-   **表示内容**: 全てのメンバーのリスト。

### 5.3. ニュース一覧ページ (`/app/news/page.tsx`)

-   **データ取得**: `microCMS` の `news` APIから全てのニュースを取得して表示する。ページネーションも実装する。
-   **表示内容**: 全てのニュースのリスト。

### 5.4. ニュース詳細ページ (`/app/news/[id]/page.tsx`)

-   **データ取得**:
    -   `generateStaticParams` で動的なルーティングパスを生成する。
    -   指定されたIDのニュースデータを `microCMS` の `news` APIから取得する。
-   **表示内容**: ニュースのタイトル、本文、アイキャッチ画像。